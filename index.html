<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta property="og:image" content="https://i.imgur.com/PjbbAng.jpeg"/>
  <meta property="og:description" content="Web D·ª± ƒêo√°n K·∫øt Qu·∫£ T√†i X·ªâu Sunwin M·ªõi Nh·∫•t 2025" />
  <title>AI D·ª± ƒëo√°n T√†i X·ªâu SunWin (Phi√™n)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-image: url('https://i.imgur.com/h3BrGSy.jpeg');
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
      color: white;
    }

    h2 {
      color: #ffd700;
      text-align: center;
      font-size: 28px;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .container {
      background: rgba(0, 0, 0, 0.85);
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5), 0 0 10px #00ff00;
      padding: 30px;
      width: 100%;
      max-width: 450px;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px;
    }

    input[type="password"], input[type="text"] {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 2px solid #00ff00;
      border-radius: 8px;
      font-size: 16px;
      outline: none;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    input[type="password"]:focus, input[type="text"]:focus {
      border-color: #ffd700;
      box-shadow: 0 0 10px #ffd700;
    }

    button {
      background: linear-gradient(135deg, #00ff00, #00cc00);
      color: white;
      border: none;
      padding: 12px 24px;
      margin: 10px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #00ff00;
    }

    .mode-btn {
      background: linear-gradient(135deg, #ff4d4d, #cc0000);
    }

    .mode-btn:hover {
      background: linear-gradient(135deg, #cc0000, #990000);
    }

    .audio-btn {
      background: #ffd700;
      color: black;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: background 0.3s;
    }

    .audio-btn:hover {
      background: #ccac00;
    }

    .loader {
      border: 6px solid rgba(255, 255, 255, 0.2);
      border-top: 6px solid #ffd700;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      display: none;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    #loadingText {
      font-size: 14px;
      color: #00ff00;
      display: none;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      text-align: center;
      width: 100%;
    }

    .history-log {
      margin-top: 20px;
      max-height: 150px;
      overflow-y: auto;
      width: 100%;
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 8px;
    }

    .history-log p {
      margin: 5px 0;
      font-size: 14px;
    }

    canvas {
      margin-top: 20px;
      max-width: 100%;
    }

    .mode-select, .main-app {
      display: none;
    }
  </style>
</head>
<body>

<div class="container" id="loginPage">
  <h2>ƒêƒÉng nh·∫≠p AI T√†i X·ªâu SunWin</h2>
  <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" />
  <button onclick="login()">ƒêƒÉng nh·∫≠p</button>
</div>

<div class="container" id="modePage" style="display:none;">
  <h2>Ch·ªçn ch·∫ø ƒë·ªô d·ª± ƒëo√°n</h2>
  <button class="mode-btn" onclick="selectMode('normal')">T√†i X·ªâu Th∆∞·ªùng</button>
  <button class="mode-btn" onclick="selectMode('md5')">T√†i X·ªâu MD5</button>
  <button class="mode-btn" onclick="selectMode('advanced')">D·ª± ƒëo√°n n√¢ng cao</button>
  <button class="mode-btn" onclick="selectMode('machineLearning')">D·ª± ƒëo√°n h·ªçc m√°y</button>
  <button class="mode-btn" onclick="selectMode('realTime')">D·ª± ƒëo√°n th·ªùi gian th·ª±c</button>
</div>

<div class="container" id="appPage" style="display:none;">
  <h2>AI PH√ÇN T√çCH PHI√äN SUNWIN</h2>
  <div class="audio-player">
    <button class="audio-btn" id="toggleAudio" onclick="toggleAudio()">
      <span>üéµ</span> B·∫≠t nh·∫°c
    </button>
  </div>
  <input type="text" id="sessionId" placeholder="Nh·∫≠p m√£ phi√™n SunWin (VD: 12345)" />
  <button onclick="predict()">D·ª± ƒëo√°n</button>
  <button onclick="resetHistory()">X√≥a l·ªãch s·ª≠</button>
  <div id="loader" class="loader"></div>
  <div id="loadingText">ƒêang ph√¢n t√≠ch phi√™n...</div>
  <div class="result" id="resultBox" style="display:none;">
    <p id="prediction"></p>
  </div>
  <canvas id="trendChart" width="400" height="200"></canvas>
  <div class="history-log" id="historyLog"></div>
</div>

<script>
  // Danh s√°ch file MP3 trong th∆∞ m·ª•c mp3
  const mp3Files = [
    "N·ªói ƒêau M√¨nh Anh Remix.mp3",
    "Chu·ªói Ng√†y V·∫Øng Em Remix.mp3",
    "Ng∆∞·ªùi Ta Kh√¥ng Y√™u Em ƒê√¢u Remix.mp3",
    "Em C≈©ng V√¥ T√¨nh Remix.mp3",
    "Qu√™n Anh Trong T·ª´ng C∆°n ƒêau Remix.mp3",
    "K·∫πo B√¥ng G√≤n Remix.mp3",
    "Gh√©t Ch√≠nh Anh Remix.mp3",
    "B·∫°n Th√¢n ∆†i Remix.mp3",
    "Nhi·ªÅu Ch√¥ng Gai Remix.mp3",
    "Anh Em Khu 2 Remix.mp3",
    "Em H√°t Ai Nghe Remix.mp3",
    "M·ªü L·ªëi Cho Em Remix.mp3",
    "N·ª• C∆∞·ªùi Kh√¥ng Vui Remix.mp3",
    "T·ª´ng L√† C·ªßa Nhau Remix.mp3",
    "Y√™u Em Nh∆∞ng Kh√¥ng V·ªõi T·ªõi Remix.mp3",
    "Chuy·ªán 10 NƒÉm Remix.mp3",
    "C√¥ G√°i √Ä Em ƒê·ª´ng Kh√≥c Remix.mp3",
    "Y√™u Em Nh∆∞ng Kh√¥ng V·ªõi T·ªõi Remix.mp3",
    "T√¨nh ƒê·∫πp C≈©ng T√†n Remix.mp3",
    "N·∫øu Em Kh√¥ng H·∫°nh Ph√∫c Remix.mp3",
    "N·∫øu E Ko H·∫°nh Ph√∫c Remix.mp3",
    "ƒê·ªïi T√¨nh ƒê·ªïi √Åo Remix.mp3",
    "V·ª´a L√≤ng Em Ch∆∞a Remix.mp3",
    "R·ªìi M√¨nh S·∫Ω H·∫°nh Ph√∫c Remix.mp3",
    "D√π Cho T·∫≠n Th·∫ø Remix.mp3",
    "M√£i L√† Anh Em Remix.mp3",
    "Khi B·∫°n C·∫ßn C√≥ T√¥i ƒê√¢y Remix.mp3",
    "Thay Th·∫ø Remix.mp3",
    "C·∫£m ∆†n Em x Em L√† C·ªßa Anh Remix.mp3",
    "N∆°i V·ª±c N∆°i Tr·ªùi Remix.mp3",
    "H√£y Xem L√† Gi·∫•c M∆° Remix.mp3",
    "Em Say R·ªìi Remix.mp3",
    "Ng·ª° Nh∆∞ L√† Gi·∫•c M∆° Remix.mp3",
    "Khu Tao S·ªëng Remix.mp3",
    "N∆°i ƒê√¢u T√¨m Th·∫•y Em Remix.mp3",
    "Em S·∫Ω L√† Ng∆∞·ªùi Ra ƒêi Remix.mp3",
    "Kh√¥ng L·∫•y ƒê∆∞·ª£c V·ª£ Remix.mp3",
    "M·∫•t K·∫øt N·ªëi Remix.mp3",
    "Em ∆†i ƒê·ª´ng Kh√≥c 2IN1 Remix.mp3",
    "ƒê·∫Øng Cay Tu·ªïi ƒê√¥i M∆∞∆°i Remix.mp3",
    "Nonstop 3IN1 Remix.mp3",
    "M∆∞a R∆°i V√†o Ph√≤ng Remix.mp3",
    "Li·ªÅu Thu·ªëc Cho Tr√°i Tym Remix.mp3",
    "Em ∆†i Anh Ph·∫£i L√†m Sao Remix.mp3",
    "D·∫´u Anh Kh√¥ng Nh√¨n Th·∫•y Remix.mp3",
    "V√°ch Ng·ªçc Ng√† x Hoa T∆∞∆°ng T∆∞ Remix.mp3",
    "Sai L·∫ßm C·ªßa Anh x Anh L√†m G√¨ Sai Remix.mp3",
    "Sai C√°ch Y√™u Remix.mp3",
    "N√†y C√¥ Em G√°i S√¨ Tin Remix.mp3",
    "Nonstop 4in1 Remix.mp3"
    // Th√™m c√°c file MP3 kh√°c t·∫°i ƒë√¢y
  ];

  let mode = 'normal';
  let historyLog = JSON.parse(localStorage.getItem('historyLog')) || [];
  let chart;
  let backgroundAudio = new Audio();
  let effectAudio = new Audio('audio/success-effect.mp3');
  let isAudioPlaying = false;

  // C·∫•u h√¨nh √¢m thanh
  backgroundAudio.volume = 0.3; // √Çm l∆∞·ª£ng nh·∫°c n·ªÅn
  effectAudio.volume = 0.5; // √Çm l∆∞·ª£ng hi·ªáu ·ª©ng
  backgroundAudio.loop = false; // T·∫Øt ch·∫ø ƒë·ªô l·∫∑p ƒë·ªÉ ph√°t file kh√°c khi k·∫øt th√∫c

  // H√†m ch·ªçn v√† ph√°t file MP3 ng·∫´u nhi√™n
  function playRandomMp3() {
    if (mp3Files.length === 0) {
      console.warn('Kh√¥ng c√≥ file MP3 n√†o trong danh s√°ch!');
      return;
    }
    const randomIndex = Math.floor(Math.random() * mp3Files.length);
    backgroundAudio.src = mp3Files[randomIndex];
    backgroundAudio.play().catch((error) => {
      console.log('L·ªói ph√°t nh·∫°c:', error);
      alert('Vui l√≤ng t∆∞∆°ng t√°c v·ªõi trang ƒë·ªÉ b·∫≠t nh·∫°c!');
    });
  }

  // Khi file MP3 hi·ªán t·∫°i k·∫øt th√∫c, ph√°t file ng·∫´u nhi√™n kh√°c
  backgroundAudio.addEventListener('ended', () => {
    playRandomMp3();
  });

  // H√†m b·∫≠t/t·∫Øt nh·∫°c
  function toggleAudio() {
    const toggleButton = document.getElementById('toggleAudio');
    if (isAudioPlaying) {
      backgroundAudio.pause();
      toggleButton.innerHTML = '<span>üéµ</span> B·∫≠t nh·∫°c';
      isAudioPlaying = false;
    } else {
      if (!backgroundAudio.src) {
        playRandomMp3(); // Ch·ªçn v√† ph√°t file MP3 ng·∫´u nhi√™n l·∫ßn ƒë·∫ßu
      } else {
        backgroundAudio.play().catch(() => {
          alert('Vui l√≤ng t∆∞∆°ng t√°c v·ªõi trang ƒë·ªÉ b·∫≠t nh·∫°c!');
        });
      }
      toggleButton.innerHTML = '<span>üéµ</span> T·∫Øt nh·∫°c';
      isAudioPlaying = true;
    }
  }

  // T·ª± ƒë·ªông ph√°t nh·∫°c n·ªÅn khi v√†o trang d·ª± ƒëo√°n
  document.getElementById('appPage').addEventListener('transitionend', () => {
    if (document.getElementById('appPage').style.display === 'block' && isAudioPlaying) {
      if (!backgroundAudio.src) {
        playRandomMp3();
      } else {
        backgroundAudio.play().catch(() => {
          console.log('Autoplay b·ªã ch·∫∑n, c·∫ßn t∆∞∆°ng t√°c ƒë·ªÉ ph√°t nh·∫°c');
        });
      }
    }
  });

  const users = [
    { password: "1" }
  ];

  function login() {
    const pass = document.getElementById("password").value;
    const userFound = users.find(u => u.password === pass);

    if (userFound) {
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("modePage").style.display = "block";
    } else {
      alert("M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!");
    }
  }

  function selectMode(selected) {
    mode = selected;
    document.getElementById("modePage").style.display = "none";
    document.getElementById("appPage").style.display = "block";
    updateHistoryLog();
    initChart();
  }

  function predict() {
    const sessionId = document.getElementById("sessionId").value.trim();
    const loader = document.getElementById("loader");
    const loadingText = document.getElementById("loadingText");
    const resultBox = document.getElementById("resultBox");
    const predictionEl = document.getElementById("prediction");

    if (!sessionId || !sessionId.match(/^[a-zA-Z0-9]+$/)) {
      alert("Vui l√≤ng nh·∫≠p m√£ phi√™n h·ª£p l·ªá (ch·ªâ ch·ª©a ch·ªØ c√°i v√† s·ªë)!");
      return;
    }

    loader.style.display = "block";
    loadingText.style.display = "block";
    resultBox.style.display = "none";
    predictionEl.innerHTML = "";

    setTimeout(() => {
      let prediction;
      if (mode === 'normal') {
        prediction = aiPrediction(sessionId);
      } else if (mode === 'md5') {
        prediction = md5Prediction(sessionId);
      } else if (mode === 'advanced') {
        prediction = advancedPrediction(sessionId);
      } else if (mode === 'machineLearning') {
        prediction = machineLearningPrediction(sessionId);
      } else if (mode === 'realTime') {
        prediction = realTimePrediction(sessionId);
      }

      predictionEl.innerHTML = `
        <strong>${prediction.result} (${prediction.number})</strong><br>
        <em>ƒê·ªô tin c·∫≠y: ${prediction.confidence}%</em>
      `;
      loader.style.display = "none";
      loadingText.style.display = "none";
      resultBox.style.display = "block";

      effectAudio.play().catch(() => {
        console.log('Ph√°t hi·ªáu ·ª©ng th·∫•t b·∫°i, c·∫ßn t∆∞∆°ng t√°c');
      });

      historyLog.push({ sessionId, result: prediction.result, confidence: prediction.confidence });
      localStorage.setItem('historyLog', JSON.stringify(historyLog));
      updateHistoryLog();
      updateChart(prediction.result);
    }, 1500);
  }

  function aiPrediction(sessionId) {
    const sum = sessionId.split('')
      .map(c => isNaN(c) ? c.charCodeAt(0) % 10 : parseInt(c))
      .reduce((a, b) => a + b, 0);
    const isTai = sum % 2 === 0;
    const confidence = 75 + Math.random() * 15;
    const number = isTai ? Math.floor(Math.random() * 8 + 11) : Math.floor(Math.random() * 8 + 3);

    return {
      result: isTai ? 'T√ÄI' : 'X·ªàU',
      number,
      confidence: confidence.toFixed(1)
    };
  }

  function md5Prediction(sessionId) {
    const length = sessionId.length;
    const isTai = length % 2 === 0;
    return {
      result: isTai ? 'T√ÄI' : 'X·ªàU',
      number: isTai ? 12 : 5,
      confidence: (85 + Math.random() * 10).toFixed(1)
    };
  }

  function advancedPrediction(sessionId) {
    const lastChar = sessionId[sessionId.length - 1];
    const isTai = isNaN(lastChar) || parseInt(lastChar) % 2 === 0;
    return {
      result: isTai ? 'T√ÄI' : 'X·ªàU',
      number: isTai ? 13 : 4,
      confidence: (87 + Math.random() * 8).toFixed(1)
    };
  }

  function machineLearningPrediction(sessionId) {
    const asciiSum = sessionId.split('').reduce((sum, c) => sum + c.charCodeAt(0), 0);
    const isTai = asciiSum % 2 === 0;
    return {
      result: isTai ? 'T√ÄI' : 'X·ªàU',
      number: isTai ? 14 : 6,
      confidence: (90 + Math.random() * 5).toFixed(1)
    };
  }

  function realTimePrediction(sessionId) {
    const lastResult = historyLog.length > 0 ? historyLog[historyLog.length - 1].result : 'T√ÄI';
    const isTai = lastResult === 'X·ªàU';
    return {
      result: isTai ? 'T√ÄI' : 'X·ªàU',
      number: isTai ? 12 : 5,
      confidence: (88 + Math.random() * 7).toFixed(1)
    };
  }

  function resetHistory() {
    historyLog = [];
    localStorage.setItem('historyLog', JSON.stringify(historyLog));
    updateHistoryLog();
    document.getElementById('sessionId').value = '';
    document.getElementById('resultBox').style.display = 'none';
    updateChart('');
  }

  function updateHistoryLog() {
    const logDiv = document.getElementById('historyLog');
    logDiv.innerHTML = historyLog.map((log, i) => 
      `<p>${i + 1}. Phi√™n: ${log.sessionId} -> D·ª± ƒëo√°n: ${log.result} (${log.confidence}%)</p>`
    ).join('');
  }

  function initChart() {
    const ctx = document.getElementById('trendChart').getContext('2d');
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['T√†i', 'X·ªâu'],
        datasets: [{
          label: 'T·∫ßn su·∫•t',
          data: [0, 0],
          backgroundColor: ['#ff4d4d', '#4d79ff'],
          borderColor: ['#cc0000', '#0033cc'],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true }
        },
        plugins: {
          legend: { display: false }
        }
      }
    });
  }

  function updateChart(result) {
    const taiCount = historyLog.filter(log => log.result === 'T√ÄI').length + (result === 'T√ÄI' ? 1 : 0);
    const xiuCount = historyLog.filter(log => log.result === 'X·ªàU').length + (result === 'X·ªàU' ? 1 : 0);
    chart.data.datasets[0].data = [taiCount, xiuCount];
    chart.update();
  }

  // Kh·ªüi t·∫°o l·ªãch s·ª≠ khi t·∫£i trang
  updateHistoryLog();
</script>
</body>
</html>